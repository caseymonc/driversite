extends layout


append scripts
	link(rel="stylesheet", href="/profile.css")

block header
	a(href="/profiles", data-transition="slide", data-direction="reverse") Users
	h1 #{title}
	if logged_in
		a(href="/logout", class="ui-btn-right", rel="external") Logout
	else
		a(href="/login", class="ui-btn-right", rel="external") Login


block content
	mixin getDate(time)
		var date = new Date(time*1000); return date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()}

	mixin listItem(user, checkin)
		li(data-icon="arrow-r")
			a(href="http://maps.google.com/maps?q=#{checkin.venue.location.lat},#{checkin.venue.location.lng}", rel="external", target="_blank")
				h3 #{user.name.givenName} #{user.name.familyName} checked in at #{checkin.venue.name}
				p #{checkin.venue.location.city}, #{checkin.venue.location.state}

	#main
		#info
			.divider
				.innerDivider
			#checkin_list
			ul(data-role="listview", data-inset="false")
				each checkin in checkins
					+listItem(user, checkin)

		#deliveryList
			.divider
					.innerDivider
			mixin listItem(address, id)
				div(data-role="collapsible", class="order", data-theme="b", data-collapsed-icon="arrow-d", data-inset="true", data-expanded-icon="arrow-u")
					h4 #{address}

			each delivery in deliveries
				+listItem("1375 N 90 E", "23452345345")


block footer
	a(href="/profile/#{user_id}/uri", data-transition="slide", style="margin:4px") Register Event URL
